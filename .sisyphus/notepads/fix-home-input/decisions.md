# 架构决策记录

## 2026-02-01 - 报告增强架构

### 决策：扩展 ReportData 而非创建新模型
**原因**：
- 保持数据一致性，所有报告信息在一个结构体中
- 简化 API 响应，前端只需一次请求获取完整数据
- 便于 PDF 生成，所有数据都在 reportData 中

### 决策：AI 生成购买建议而非模板拼接
**原因**：
- 模板拼接过于机械，缺乏深度分析
- AI 可以综合所有数据生成更专业的建议
- 提升用户体验，建议更有价值

### 决策：PDF 使用 fpdf 内置绘图而非图表库
**原因**：
- 避免引入额外依赖
- fpdf 的 Rect() 足够绘制简单柱状图
- 保持 PDF 生成的轻量级

### 决策：典型评论筛选阈值
**原因**：
- 好评：>=8.0（优秀）
- 差评：<5.0（较差）
- 各取前3条，平衡展示
